# huge_sort
Проект был разработан мной в рамках выполнения тестового задания при приёме на работу.

Нужно было написать программу, которая отсортирует числа формата double
хранящихся в текстовом файле размером 1Гб (одно число в одной строке).

Пример  
1.234542e+303  
7.2372e+302  
...  
0  
3.6434e+298  
  
Программа должна использовать не более 100Мб оперативной памяти, и
Работать не дольше 25-30 минут (на 2Гц современном одноядерном процессоре).
Обязательные параметры: <имя файла неотсортированного> <имя файла отсортированного>
Также должен быть написан генератор неотсортированного 1Гб файла с числами формата double  
  
  
Мной были разработаны три приложения: `generator` (для генерации неотсортированного файла), `sorter` (для сортировки файла), `tester` (приложение, проверяющее была ли выполнена сортировка), а также статическая библиотека `common` с некоторым общим функционалом.  
  
При запуске приложений используются следующие параметры:
- `generator.exe [Output_filename]`. В случае, если имя выходного файла не указано, генерируется файл с именем по умолчанию huge_file.txt в каталог с программой  
- `sorter.exe [Input filename [Output filename]]`. Если имена входного и выходного файлов не указывается, то используются имена по умолчанию huge_file.txt и huge_file_sorted.txt
- `tester.exe [Input file]`. Если имя входного файлы не указано, то берётся также имя по умолчанию huge_file_sorted.txt

Сортировка входного файла происходит по следующему алгоритму:
1. Входной файл разделяется на некоторое количество кусков ("чанков"), суммарный размер элементов которых меньше 100 мб
2. Сортировка каждого чанка функцией sort стантартной библиотеки.
3. Сохранение каждого чанка в отдельный файл
4. Слияние чанков по следующему алгоритму:
 4. а) Для каждого чанка завести указатель на текущую позицию, поставить его на первую позицию
 4. б) Найти чанк, у которого значение в текущей позиции минимально среди значений в текущих позициях остальных чанков
 4. в) Добавить в конец выходного отсортированного файла значение, найденное в пункте 4б)
 4. г) Передвинуть указатель на текущую позицию найденного в пункте 4б) чанка вперёд на одну позицию
 4. д) Повторять пункты 4б) - 4г) до того момента пока все элементы всех чанков не будут записаны в выходной файл

Алгоритм является модификацией алгоритма сортировки слиянием. Время выполнения сортировки моим алгоритмом под управлением ОС `Windows 10` в среднем 7 минут, в ОС `Linux Debian` - 2 минуты.

Программа разработана на языке С++ в среде разработки `QT Creator`, все приложения проекта кроссплатформенны (`Windows`+`Linux`). Для компиляции в ОС `Linux` можно использовать утилиту `make`
